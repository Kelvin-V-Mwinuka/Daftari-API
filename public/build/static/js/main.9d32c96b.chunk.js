(this["webpackJsonpdaftari-client"]=this["webpackJsonpdaftari-client"]||[]).push([[0],{211:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(66),l=a.n(s),o=a(1),i=a(2),c=a(4),m=a(3),u=a(5),d=(a(81),a(8)),p=a.n(d),h=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleLogin=function(e){e.preventDefault();var t=new FormData(e.target),r=p()(a.props.base_url,{path:"/api/user/authenticate",queryParams:{username:t.get("username"),password:t.get("password")}});fetch(r,{method:"POST"}).then((function(e){return e.json()})).then((function(e){"statusCode"in e||"message"in e?console.log(e):(localStorage.setItem("user",JSON.stringify(e)),a.props.getUser())}))},a.alert=n.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{className:"auth-form",onSubmit:this.handleLogin},n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{ref:this.alert,className:"alert alert-danger d-md-none",role:"alert"},"Wrong username/email or password")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Username or Email"),n.a.createElement("input",{type:"text",className:"form-control",id:"username",name:"username",placeholder:"Enter username or email"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password"),n.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password"})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))}}]),t}(n.a.Component),v=a(67),f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).makeElementInvalid=function(e){e.classList.remove("is-valid"),e.classList.add("is-invalid")},a.makeElementValid=function(e){e.classList.remove("is-invalid"),e.classList.add("is-valid")},a.handleNameChange=function(e){var t=e.target;""===t.value?(a.makeElementInvalid(t),a.setState({name:{value:t.value,valid:!1,error:"Please provide a name"}})):(a.makeElementValid(t),a.setState({name:{value:t.value,valid:!0}}))},a.handleEmailChange=function(e){var t=e.target;if(""===t.value)a.makeElementInvalid(t),a.setState({email:{value:t.value,valid:!1,error:"Please provide an email address"}});else if(v.validate(t.value)){var r=p()(a.props.base_url,{path:"api/validate/email",queryParams:{email:t.value}});fetch(r).then((function(e){return e.json()})).then((function(e){!0===e.available?(a.makeElementValid(t),a.setState({email:{value:t.value,valid:!0}})):(a.makeElementInvalid(t),a.setState({email:{value:t.value,valid:!1,error:"This email is already in use"}}))}))}else a.makeElementInvalid(t),a.setState({email:{value:t.value,valid:!1,error:"Please provide a valid email"}})},a.handleUsernameChange=function(e){var t=e.target;if(""===t.value||t.value.length<8)a.makeElementInvalid(t),a.setState({username:{value:t.value,valid:!1,error:"Username must be at least 8 characters long"}});else{var r=p()(a.props.base_url,{path:"api/validate/username",queryParams:{username:t.value}});fetch(r).then((function(e){return e.json()})).then((function(e){!0===e.available?(a.makeElementValid(t),a.setState({username:{value:t.value,valid:!0}})):(a.makeElementInvalid(t),a.setState({username:{value:t.value,valid:!1,error:"Username unavailable"}}))}))}},a.handlePasswordChange=function(e){var t=e.target,r=a.confirmPasswordRef.current;""===t.value?(a.makeElementInvalid(t),a.setState({password:{value:t.value,valid:!1,error:"Please create a password"}})):(a.makeElementValid(t),a.setState({password:{value:t.value,valid:!0}})),t.value!==r.value?(a.makeElementInvalid(r),a.setState({confirmPassword:{value:r.value,valid:!1,error:"Passwords don't match"}})):""!==t.value&&(a.makeElementValid(r),a.setState({confirmPassword:{value:r.value,valid:!0}}))},a.handleConfirmPasswordChange=function(e){var t=e.target;t.value!==a.state.password.value?(a.makeElementInvalid(t),a.setState({confirmPassword:{value:t.value,valid:!1}})):""!==a.state.password.value&&(a.makeElementValid(t),a.setState({confirmPassword:{value:t.value,valid:!0}}))},a.handleFormSubmit=function(e){e.preventDefault(),Object.keys(a.state).forEach((function(e){a.state[e].valid||console.log(e+" is not valid")})),console.log("All values valid!"),fetch(a.props.base_url+"/api/user/register",{method:"POST",headers:{Accept:"application/json"},body:new URLSearchParams(new FormData(e.target))}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("user",JSON.stringify(e)),a.props.getUser()}))},a.state={name:{value:"",valid:!1,error:"Please provide a name"},email:{value:"",valid:!1,error:"Email already in use"},username:{value:"",valid:!1,error:"Unavailable"},password:{value:"",valid:!1,error:"Please provide a password"},confirmPassword:{value:"",valid:!1},gender:{value:"other",valid:!0}},a.confirmPasswordRef=n.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{className:"auth-form",onSubmit:this.handleFormSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{forhtml:"email"},"Name"),n.a.createElement("input",{onChange:this.handleNameChange,type:"text",className:"form-control",id:"name",name:"name","aria-describedby":"nameHelp",placeholder:"Enter name"}),n.a.createElement("small",{id:"nameHelp",className:"form-text text-muted"},"You may choose wether to display this publicly to other Daftari users"),n.a.createElement("div",{className:"valid-feedback"},"Awesome!"),n.a.createElement("div",{className:"invalid-feedback"},this.state.name.error)),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{forhtml:"email"},"Email"),n.a.createElement("input",{onChange:this.handleEmailChange,type:"email",className:"form-control",id:"email",name:"email","aria-describedby":"emailHelp",placeholder:"Enter email"}),n.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else."),n.a.createElement("div",{className:"valid-feedback"},"Awesome!"),n.a.createElement("div",{className:"invalid-feedback"},this.state.email.error)),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{forhtml:"email"},"Username"),n.a.createElement("input",{onChange:this.handleUsernameChange,type:"text",className:"form-control",id:"username",name:"username","aria-describedby":"usernameHelp",placeholder:"Enter username"}),n.a.createElement("small",{id:"usernameHelp",className:"form-text text-muted"},"This will be publicly visible to other Daftari users."),n.a.createElement("div",{className:"valid-feedback"},"Awesome!"),n.a.createElement("div",{className:"invalid-feedback"},this.state.username.error)),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{forhtml:"password"},"Password"),n.a.createElement("input",{onChange:this.handlePasswordChange,type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password"}),n.a.createElement("div",{className:"valid-feedback"},"Awesome!"),n.a.createElement("div",{className:"invalid-feedback"},this.state.password.error)),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{forhtml:"confirmPassword"},"Confirm password"),n.a.createElement("input",{onChange:this.handleConfirmPasswordChange,ref:this.confirmPasswordRef,type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",placeholder:"Password"}),n.a.createElement("div",{className:"valid-feedback"},"Passwords match!"),n.a.createElement("div",{className:"invalid-feedback"},"Passwords don't match")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Gender: "),n.a.createElement("div",{className:"form-check form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"radio",name:"gender",id:"maleRadio",value:"male"}),n.a.createElement("label",{className:"form-check-label",htmlFor:"maleRadio"},"Male")),n.a.createElement("div",{className:"form-check form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"radio",name:"gender",id:"femaleRadio",value:"female"}),n.a.createElement("label",{className:"form-check-label",htmlFor:"femaleRadio"},"Female")),n.a.createElement("div",{className:"form-check form-check-inline"},n.a.createElement("input",{className:"form-check-input",type:"radio",name:"gender",id:"otherRadio",value:"other"}),n.a.createElement("label",{className:"form-check-label",htmlFor:"otherRadio"},"Other"))),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))}}]),t}(n.a.Component),b=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("ul",{className:"nav nav-pills mb-3",id:"pills-tab",role:"tablist"},n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link active",id:"pills-home-tab","data-toggle":"pill",href:"#pills-home",role:"tab","aria-controls":"pills-home","aria-selected":"true"},"Login")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",id:"pills-profile-tab","data-toggle":"pill",href:"#pills-profile",role:"tab","aria-controls":"pills-profile","aria-selected":"false"},"Register"))),n.a.createElement("div",{className:"tab-content",id:"pills-tabContent"},n.a.createElement("div",{className:"tab-pane fade show active",id:"pills-home",role:"tabpanel","aria-labelledby":"pills-home-tab"},n.a.createElement(h,{getUser:this.props.getUser,base_url:this.props.base_url})),n.a.createElement("div",{className:"tab-pane fade",id:"pills-profile",role:"tabpanel","aria-labelledby":"pills-profile-tab"},n.a.createElement(f,{getUser:this.props.getUser,base_url:this.props.base_url}))))}}]),t}(n.a.Component),g=a(16),E=a.n(g),N=a(6),j=(a(41),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).resetState=function(){a.setState({title:"",description:"",private:!1,tags:[]})},a.onTitleChange=function(e){var t=e.target.value.trim();a.setState({title:t})},a.onPrivacyChange=function(e){a.setState({private:e.target.checked})},a.onDescriptionChange=function(e){var t=e.target.value.trim();t.length>140?a.characterIndicator.current.classList.replace("text-success","text-danger"):a.characterIndicator.current.classList.replace("text-danger","text-success"),a.setState({description:t}),E()(e.target)},a.onTagsChange=function(e){var t=e.target.value.split(";");a.setState({tags:t.map((function(e){return e.trim()}))})},a.handleSubmit=function(e){e.preventDefault();var t=e.target;if(""!==a.state.title){var r=new FormData;r.append("title",a.state.title),r.append("description",a.state.description),r.append("private",a.state.private),r.append("tags",a.state.tags),r.append("user_id",a.props.user._id),fetch(a.props.base_url+"/api/journals/create",{method:"POST",headers:{Accept:"application/json"},body:new URLSearchParams(r)}).then((function(e){return e.json()})).then((function(e){"status"in e&&"Success"==e.status?(a.props.getJournals(),N.ToastsStore.success("Journal created"),t.reset(),a.resetState()):N.ToastsStore.error("Journal creation failed. Try again later")}))}else N.ToastsStore.error("You must provide a title")},a.state={title:"",description:"",private:!1,tags:[]},a.characterIndicator=n.a.createRef(),a.submitButton=n.a.createRef(),a.tagsContainer=n.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{className:"data-form",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"title"},"Title"),n.a.createElement("input",{onChange:this.onTitleChange,type:"text",className:"form-control",id:"title",name:"title",placeholder:"Note Title"})),n.a.createElement("div",{className:"form-check"},n.a.createElement("input",{onClick:this.onPrivacyChange,type:"checkbox",className:"form-check-input",id:"private",name:"private","aria-describedby":"privateHelp"}),n.a.createElement("label",{className:"form-check-label",htmlFor:"private"},"Private"),n.a.createElement("small",{id:"privateHelp",className:"form-text text-muted"},"All notes created in a private journal will automatically be private")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"tags-input"},"Tags"),n.a.createElement("textarea",{onChange:this.onTagsChange,type:"text",className:"form-control",id:"tags-input",name:"tags-input",placeholder:"Tags","aria-describedby":"tagsHelp"}),n.a.createElement("small",{id:"tagsHelp",className:"form-text text-muted"},"Add semi-colon(;) at the end of text to add it to list of tags"),n.a.createElement("div",{ref:this.tagsContainer},this.state.tags.map((function(e){return n.a.createElement("span",{class:"badge badge-warning"},e)})))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"description-input"},"Description"),n.a.createElement("small",{ref:this.characterIndicator,id:"descriptionHelp",className:"form-text text-success"},140-this.state.description.length," characters",this.state.description.length>140?". Description will be trimmed to 140 characters":""),n.a.createElement("textarea",{className:"form-control",onChange:this.onDescriptionChange,id:"description-input",name:"description-input",placeholder:"Description","aria-describedby":"descriptionHelp"})),n.a.createElement("button",{ref:this.submitButton,type:"submit",className:"btn btn-primary"},"Create Journal"),n.a.createElement(N.ToastsContainer,{store:N.ToastsStore}))}}]),t}(n.a.Component)),k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).resetState=function(){a.setState({journal_id:"",title:"",private:!1,text:"",tags:[]})},a.onJournalChange=function(e){var t=e.target.value;a.setState({journal_id:t});var r=a.privateCheckRef.current;a.state.journals.forEach((function(e){e._id===t&&"true"===e.private?(a.setState({private:!0}),r.checked=!0,r.setAttribute("disabled","disabled")):r.removeAttribute("disabled")}))},a.onTitleChange=function(e){var t=e.target.value.trim();a.setState({title:t})},a.onPrivacyChange=function(e){a.setState({private:e.target.checked})},a.onTextChange=function(e){var t=e.target.value.trim();a.setState({text:t}),E()(e.target)},a.onTagsChange=function(e){var t=e.target.value.split(";");a.setState({tags:t.map((function(e){return e.trim()}))}),E()(e.target)},a.updateNote=function(){var e=new FormData;e.append("note_id",a.props.note._id),e.append("user_id",a.props.user._id),e.append("title",a.state.title),e.append("private",a.state.private),e.append("text",a.state.text),e.append("tags",a.state.tags),fetch(a.props.base_url+"/api/notes/update",{method:"POST",headers:{Accept:"application/json"},body:new URLSearchParams(e)}).then((function(e){return e.json()})).then((function(e){"status"in e&&"Success"===e.status?(a.props.getNotes(),N.ToastsStore.success("Note updated")):N.ToastsStore.error("Failed to update note. Try again later")}))},a.handleSubmit=function(e){e.preventDefault();var t=e.target;if(""===a.state.title&&""===a.state.text)N.ToastsStore.error("You must provide either a title or text");else{if(a.props.note)return void a.updateNote();var r=new FormData;r.append("journal_id",a.state.journal_id),r.append("title",a.state.title),r.append("private",a.state.private),r.append("text",a.state.text),r.append("tags",a.state.tags),r.append("user_id",a.props.user._id),fetch(a.props.base_url+"/api/notes/create",{method:"POST",headers:{Accept:"application/json"},body:new URLSearchParams(r)}).then((function(e){return e.json()})).then((function(e){"status"in e&&"Success"===e.status?(a.props.getNotes(),N.ToastsStore.success("Note created"),t.reset(),a.resetState()):N.ToastsStore.error("Failed to create note. Try again later")}))}},a.state={journal_id:"",title:"",private:!1,text:"",tags:[],journals:[]},a.privateCheckRef=n.a.createRef(),a.journalRef=n.a.createRef(),a.titleRef=n.a.createRef(),a.textRef=n.a.createRef(),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=p()(this.props.base_url,{path:"/api/journals/retrieve",queryParams:{user_id:this.props.user._id}});fetch(t).then((function(e){return e.json()})).then((function(t){"journals"in t&&e.setState({journals:t.journals})})),this.props.note&&(this.journalRef.current.classList.add("d-none"),this.titleRef.current.value=this.props.note.title,this.privateCheckRef.current.checked="true"===this.props.note.private,this.textRef.current.value=this.props.note.text,this.setState({title:this.props.note.title,private:"true"===this.props.private,text:this.props.note.text,tags:this.props.note.tags.split(",").map((function(e){return e.trim()}))}))}},{key:"render",value:function(){return n.a.createElement("form",{className:"data-form",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"form-group",ref:this.journalRef},n.a.createElement("label",{htmlFor:"journal-select"},"Journal"),n.a.createElement("select",{onChange:this.onJournalChange,className:"form-control",id:"journal-select",name:"journal-select"},n.a.createElement("option",{value:""},"No Journal"),this.state.journals.map((function(e){return n.a.createElement("option",{key:e._id,value:e._id},e.title)})))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"title"},"Title"),n.a.createElement("input",{ref:this.titleRef,type:"text",onChange:this.onTitleChange,className:"form-control",id:"title",name:"title",placeholder:"Note Title"})),n.a.createElement("div",{className:"form-check"},n.a.createElement("input",{ref:this.privateCheckRef,onClick:this.onPrivacyChange,type:"checkbox",className:"form-check-input",id:"private",name:"private","aria-describedby":"privateHelp"}),n.a.createElement("label",{className:"form-check-label",htmlFor:"private"},"Private"),n.a.createElement("small",{id:"privateHelp",className:"form-text text-muted"},"All notes created in a private journal will automatically be private")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"tags-input"},"Tags"),n.a.createElement("textarea",{onChange:this.onTagsChange,type:"text",className:"form-control",id:"tags-input",name:"tags-input",placeholder:"Tags","aria-describedby":"tagsHelp",value:this.state.tags.join(";")}),n.a.createElement("small",{id:"tagsHelp",className:"form-text text-muted"},"Add semi-colon(;) at the end of text to add it to list of tags"),n.a.createElement("div",null,this.state.tags.map((function(e,t){return n.a.createElement("span",{key:t,className:"badge badge-success"},e)})))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"text-input"},"Text"),n.a.createElement("textarea",{ref:this.textRef,onChange:this.onTextChange,className:"form-control",id:"text-input",name:"text-input",placeholder:"Text","aria-describedby":"textHelp"})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},this.props.note?"Update Note":"Create Note"),n.a.createElement(N.ToastsContainer,{store:N.ToastsStore}))}}]),t}(n.a.Component),y=(a(90),a(68)),_=a.n(y),w=a(69),S=a.n(w),x=a(70),C=a.n(x),O=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).getAvatar=function(e){switch(e.gender){case"male":return n.a.createElement("img",{className:"avatar",src:_.a,alt:"Male avatar"});case"female":return n.a.createElement("img",{className:"avatar",src:S.a,alt:"Female avatar"});default:return n.a.createElement("img",{className:"avatar",src:C.a,alt:"Other avatar"})}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"card profile-card"},n.a.createElement("div",{className:"media"},n.a.createElement("div",{className:"d-flex",href:"#"},this.getAvatar(this.props.user)),n.a.createElement("div",{className:"media-body"},n.a.createElement("h5",null,this.props.user.name),n.a.createElement("h6",{className:"text-muted"},this.props.user.email," - ",this.props.user.username),n.a.createElement("p",null,"true"===this.props.user.private?n.a.createElement("span",{className:"badge badge-danger"},"Private"):n.a.createElement("span",{className:"badge badge-primary"},"Public"))))))}}]),t}(n.a.Component),P=(a(91),a(71)),T=a.n(P),L=a(72),R=a.n(L),D=a(73),A=a.n(D),J=a(74),U=a.n(J),F=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).noteLiked=function(){for(var e=0;e<a.props.liked_notes.length;e++)if(a.props.liked_notes[e]._id===a.props.note._id)return!0;return!1},a.getPrivateStatus=function(){return"true"===a.props.note.private?n.a.createElement("span",{className:"badge badge-danger"},"Private"):n.a.createElement("span",{className:"badge badge-info"},"Public")},a.getLikeButton=function(){return a.noteLiked(),a.noteLiked()?n.a.createElement("button",{onClick:a.likeNote,className:"btn btn-secondary btn-sm note-button"},n.a.createElement("span",null,n.a.createElement("img",{className:"note-icon",src:R.a,alt:"Unliked icon"})),n.a.createElement("b",null,"Unlike")):n.a.createElement("button",{onClick:a.likeNote,className:"btn btn-secondary btn-sm note-button"},n.a.createElement("span",null,n.a.createElement("img",{className:"note-icon",src:T.a,alt:"Liked icon"})),n.a.createElement("b",null,"Like"))},a.getEditButton=function(){if(a.props.user._id===a.props.note.user_id)return n.a.createElement("div",{className:"dropdown note-dropdown"},n.a.createElement("button",{className:"btn btn-secondary btn-sm note-button",id:"editButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.a.createElement("span",null,n.a.createElement("img",{className:"note-icon",src:A.a,alt:"Edit icon"})),n.a.createElement("b",null,"Edit")),n.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"editButton"},n.a.createElement(k,{base_url:a.props.base_url,user:a.props.user,note:a.props.note,getNotes:a.props.getNotes})))},a.getDeleteButton=function(){if(a.props.user._id===a.props.note.user_id)return n.a.createElement("div",{className:"dropdown note-dropdown"},n.a.createElement("button",{className:"btn btn-secondary btn-sm note-button",id:"deleteButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.a.createElement("span",null,n.a.createElement("img",{className:"note-icon",src:U.a,alt:"Delete icon"})),n.a.createElement("b",null,"Delete")),n.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"deleteButton"},n.a.createElement("a",{className:"dropdown-item",href:"#"},"Close"),n.a.createElement("a",{className:"dropdown-item",onClick:a.deleteNote,href:"#"},"Delete")))},a.deleteNote=function(e){var t=new FormData;t.append("note_id",a.props.note._id),t.append("user_id",a.props.user._id),fetch(a.props.base_url+"/api/notes/delete",{method:"POST",headers:{Accept:"application/json"},body:new URLSearchParams(t)}).then((function(e){return e.json()})).then((function(e){"status"in e&&"Success"===e.status&&a.props.getNotes()}))},a.likeNote=function(e){var t=new FormData;t.append("note_id",a.props.note._id),t.append("user_id",a.props.user._id),fetch(a.props.base_url+"/api/notes/like",{method:"POST",headers:{Accept:"application/json"},body:new URLSearchParams(t)}).then((function(e){return e.json()})).then((function(e){"action"in e&&a.props.getLikedNotes()}))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"card note-card shadow-lg"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title note-title"},this.props.note.title),n.a.createElement("p",{className:"card-text note-text"},this.props.note.text),n.a.createElement("p",null,this.props.note.tags.split(",").map((function(e,t){return n.a.createElement("span",{key:t,className:"badge badge-success"},e.trim())}))),n.a.createElement("p",null,this.getPrivateStatus()),n.a.createElement("div",null,this.getLikeButton(),this.getEditButton(),this.getDeleteButton())))}}]),t}(n.a.Component),I=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("h5",null,n.a.createElement("b",null,"Liked Notes")),n.a.createElement("div",{className:"container-fluid"},n.a.createElement("div",{className:"row flex-row flex-nowrap"},this.props.liked_notes.map((function(t){return n.a.createElement(F,{key:t._id,note:t,base_url:e.props.base_url,user:e.props.user,liked_notes:e.props.liked_notes,getLikedNotes:e.props.getLikedNotes})})))))}}]),t}(n.a.Component),B=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(O,{base_url:this.props.base_url,user:this.props.user}),n.a.createElement(I,{base_url:this.props.base_url,user:this.props.user,journals:this.props.journals,notes:this.props.notes,liked_notes:this.props.liked_notes,getLikedNotes:this.props.getLikedNotes}))}}]),t}(n.a.Component),H=a(25),q=a(75),M=a.n(q),V=function(e){function t(){var e,a;Object(o.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).getPrivateStatus=function(e){return"true"===e.private?"Private":"Public"},a.getEditButton=function(){},a.getDeleteButton=function(){},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return null===this.props.journal?n.a.createElement("div",{className:"card journal-card shadow-lg"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title journal-title"},"No Journal"),n.a.createElement("h6",{className:"card-text journal-text"},"Notes that don't belong to any journal",this.getEditButton(),this.getDeleteButton()))):n.a.createElement("div",{className:"card journal-card shadow-lg"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title journal-title"},this.props.journal.title),n.a.createElement("p",{className:"card-text journal-text"},this.props.journal.description),n.a.createElement("p",null,this.props.journal.tags.split(",").map((function(e){return n.a.createElement("span",{key:e,className:"badge badge-warning"},e.trim())})))))}}]),t}(n.a.Component),W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onJournalChange=function(e){a.props.setSelectedJournal.bind(Object(H.a)(a),e.target.value).call()},a.state={journals:[],notes:[],selected_journal:null},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"d-flex flex-row"},n.a.createElement("select",{onChange:this.onJournalChange,className:"custom-select",id:"journal-select"},n.a.createElement("option",{value:""},"No Journal"),this.props.journals.map((function(e){return n.a.createElement("option",{key:e._id,value:e._id},e.title)})))),n.a.createElement(V,{base_url:this.props.base_url,user:this.props.user,journal:this.props.selected_journal}),n.a.createElement(M.a,{options:this.masonryOptions,className:"notes-grid d-flex flex-wrap"},this.props.notes.map((function(t){return n.a.createElement(F,{key:t._id,base_url:e.props.base_url,user:e.props.user,note:t,liked_notes:e.props.liked_notes,getLikedNotes:e.props.getLikedNotes,getNotes:e.props.getNotes})}))))}}]),t}(n.a.Component),G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).getJournals=function(){var e=p()(a.props.base_url,{path:"api/journals/retrieve",queryParams:{user_id:a.props.user._id}});fetch(e).then((function(e){return e.json()})).then((function(e){"journals"in e&&a.setState({journals:e.journals})}))},a.getNotes=function(){var e=null;e=null===a.state.selected_journal?"":a.state.selected_journal._id;var t=p()(a.props.base_url,{path:"/api/notes/retrieve",queryParams:{user_id:a.props.user._id,journal_id:e}});fetch(t,{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){"notes"in e&&a.setState({notes:e.notes})}))},a.setSelectedJournal=function(e){""===e&&a.setState({selected_journal:null},(function(){a.getNotes()})),a.state.journals.forEach((function(t){t._id===e&&a.setState({selected_journal:t},(function(){a.getNotes()}))}))},a.getLikedNotes=function(){var e=p()(a.props.base_url,{path:"/api/notes/liked",queryParams:{user_id:a.props.user._id}});fetch(e,{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){"notes"in e&&a.setState({liked_notes:e.notes})}))},a.state={journals:[],notes:[],liked_notes:[],selected_journal:null},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getJournals(),this.getNotes(),this.getLikedNotes()}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("ul",{className:"nav nav-pills mb-3",id:"pills-tab",role:"tablist"},n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link active",id:"pills-home-tab","data-toggle":"pill",href:"#pills-home",role:"tab","aria-controls":"pills-home","aria-selected":"true"},"Home")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",id:"pills-profile-tab","data-toggle":"pill",href:"#pills-profile",role:"tab","aria-controls":"pills-profile","aria-selected":"false"},"Profile")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",id:"pills-journal-tab","data-toggle":"pill",href:"#pills-add-journal",role:"tab","aria-controls":"pills-add-journal","aria-selected":"false"},"Add Journal")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",id:"pills-note-tab","data-toggle":"pill",href:"#pills-add-note",role:"tab","aria-controls":"pills-add-note","aria-selected":"false"},"Add Note")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",id:"pills-logout-tab","data-toggle":"modal","data-target":"#logoutModal","aria-selected":"false"},"Logout"))),n.a.createElement("div",{className:"tab-content",id:"pills-tabContent"},n.a.createElement("div",{className:"tab-pane fade show active",id:"pills-home",role:"tabpanel","aria-labelledby":"pills-home-tab"},n.a.createElement(W,{base_url:this.props.base_url,user:this.props.user,journals:this.state.journals,notes:this.state.notes,liked_notes:this.state.liked_notes,selected_journal:this.state.selected_journal,setSelectedJournal:this.setSelectedJournal,getLikedNotes:this.getLikedNotes,getNotes:this.getNotes})),n.a.createElement("div",{className:"tab-pane fade",id:"pills-profile",role:"tabpanel","aria-labelledby":"pills-home-tab"},n.a.createElement(B,{base_url:this.props.base_url,user:this.props.user,journals:this.state.journals,notes:this.state.notes,liked_notes:this.state.liked_notes,getLikedNotes:this.getLikedNotes})),n.a.createElement("div",{className:"tab-pane fade",id:"pills-add-journal",role:"tabpanel","aria-labelledby":"pills-profile-tab"},n.a.createElement(j,{base_url:this.props.base_url,user:this.props.user,getJournals:this.getJournals})),n.a.createElement("div",{className:"tab-pane fade",id:"pills-add-note",role:"tabpanel","aria-labelledby":"pills-contact-tab"},n.a.createElement(k,{base_url:this.props.base_url,user:this.props.user,getNotes:this.getNotes}))),n.a.createElement("div",{className:"modal fade",id:"logoutModal",tabIndex:"-1",role:"dialog","aria-hidden":"true"},n.a.createElement("div",{className:"modal-dialog",role:"document"},n.a.createElement("div",{className:"modal-content"},n.a.createElement("div",{className:"modal-body"},n.a.createElement("p",null,"Are you sure you want to log out?"),n.a.createElement("button",{type:"button",className:"btn btn-secondary note-button","data-dismiss":"modal"},"Close"),n.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:this.props.logout},"Logout"))))))}}]),t}(n.a.Component),Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).logout=function(){localStorage.removeItem("user"),a.setState({user:null})},a.getUser=function(){var e=JSON.parse(localStorage.getItem("user"));null!==e&&a.setState({user:e})},a.state={user:null,base_url:"http://localhost:8000"},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"render",value:function(){return n.a.createElement("div",null,null===this.state.user?n.a.createElement(b,{base_url:this.state.base_url,getUser:this.getUser}):n.a.createElement(G,{base_url:this.state.base_url,user:this.state.user,logout:this.logout}))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},41:function(e,t,a){},68:function(e,t,a){e.exports=a.p+"static/media/boy.333fa0cb.svg"},69:function(e,t,a){e.exports=a.p+"static/media/girl.038dbd32.svg"},70:function(e,t,a){e.exports=a.p+"static/media/neutral.fcfc134f.svg"},71:function(e,t,a){e.exports=a.p+"static/media/unliked.9b613ce3.svg"},72:function(e,t,a){e.exports=a.p+"static/media/liked.d654ce19.svg"},73:function(e,t,a){e.exports=a.p+"static/media/edit.d37d9400.svg"},74:function(e,t,a){e.exports=a.p+"static/media/delete.e204e045.svg"},76:function(e,t,a){e.exports=a(211)},81:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.9d32c96b.chunk.js.map